{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Atlas Search Index Configuration",
    "description": "Configuration for MongoDB Atlas Search index with fuzzy matching support",
    
    "indexName": "default",
    "collectionName": "shopee_products",
    
    "instructions": [
        "1. Go to MongoDB Atlas > Your Cluster > Atlas Search",
        "2. Click 'Create Search Index'",
        "3. Choose 'JSON Editor'",
        "4. Use the 'indexDefinition' below",
        "5. Name the index 'default'",
        "6. Set ATLAS_SEARCH_ENABLED=true in .env.local"
    ],
    
    "indexDefinition": {
        "mappings": {
            "dynamic": false,
            "fields": {
                "title": {
                    "type": "string",
                    "analyzer": "lucene.standard",
                    "searchAnalyzer": "lucene.standard"
                },
                "price_usd": {
                    "type": "number"
                },
                "sold": {
                    "type": "number"
                },
                "rating": {
                    "type": "number"
                },
                "itemid": {
                    "type": "string"
                }
            }
        },
        "analyzers": [
            {
                "name": "thai_analyzer",
                "charFilters": [],
                "tokenizer": {
                    "type": "standard"
                },
                "tokenFilters": [
                    {
                        "type": "lowercase"
                    },
                    {
                        "type": "icuFolding"
                    }
                ]
            }
        ]
    },
    
    "synonyms": [
        {
            "name": "product_synonyms",
            "analyzer": "lucene.standard",
            "source": {
                "collection": "synonyms"
            }
        }
    ],
    
    "notes": {
        "fuzzySearch": "Enabled via maxEdits parameter in $search queries (up to 2 character changes)",
        "autocomplete": "Can be added later with autocomplete field type",
        "facets": "Can enable faceted search by adding 'stringFacet' and 'numberFacet' types"
    }
}
