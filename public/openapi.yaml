openapi: 3.1.0
info:
  title: GoGoCash Agent API
  description: API for searching products, earning cashback, and managing user profiles.
  version: 2.1.0
servers:
  - url: https://gogocash-acp.vercel.app
    description: Production Server

paths:
  /api/login:
    post:
      operationId: loginUser
      summary: Login or Register with Email/Phone
      description: Authenticates a user via Email or Phone. Creates a new account if one doesn't exist. Returns a session token.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: User's email address (e.g. user@example.com)
                phone:
                  type: string
                  description: User's phone number (e.g. +66812345678)
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  session_token:
                    type: string
                    description: Bearer token for future requests
                  message:
                    type: string
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      balance:
                        type: number

  /api/linkWallet:
    post:
      operationId: linkWithWallet
      summary: Link Ethereum Wallet (Legacy)
      description: Alternative login method using a Web3 wallet address.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                wallet_address:
                  type: string
                  description: Ethereum-compatible wallet address (0x...)
      responses:
        "200":
          description: Successful link
          content:
            application/json:
              schema:
                type: object
                properties:
                  session_token:
                    type: string

  /api/user/profile:
    get:
      operationId: getUserProfile
      summary: Get User Profile & Balance
      description: Requires session_token from login.
      parameters:
        - name: session_token
          in: query
          required: true
          schema:
            type: string
            description: Token received from /api/auth/login
      responses:
        "200":
          description: User profile data
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      balance:
                        type: number
                        description: Current cashback balance
                      go_points:
                        type: number
                      go_tier:
                        type: string

  /api/user/cashback:
    get:
      operationId: getCashbackHistory
      summary: Get Cashback Transaction History
      description: Requires session_token from login.
      parameters:
        - name: session_token
          in: query
          required: true
          schema:
            type: string
            description: Token received from /api/auth/login
      responses:
        "200":
          description: History of cashback earnings
          content:
            application/json:
              schema:
                type: object
                properties:
                  cashbacks:
                    type: array
                    items:
                      type: object
                      properties:
                        amount:
                          type: number
                        status:
                          type: string
                        merchant_name:
                          type: string
                        created_at:
                          type: string

  /api/searchProducts:
    get:
      operationId: searchProducts
      summary: Search for products and deals
      parameters:
        - name: query
          in: query
          required: true
          schema:
            type: string
        - name: session_token
          in: query
          required: false
          schema:
            type: string
            description: Optional token for personalized results
      responses:
        "200":
          description: List of products
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        product_name:
                          type: string
                        product_price:
                          type: number
                        product_price_usd:
                          type: number
                        merchant_name:
                          type: string
                        image_url:
                          type: string
                        affiliate_link:
                          type: string
                        estimated_cashback:
                          type: number

  /api/getGifts:
    get:
      operationId: getGiftIdeas
      summary: Get Christmas gift recommendations
      parameters:
        - name: recipient
          in: query
          schema:
            type: string
        - name: budget
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Gift suggestions
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        product_name:
                          type: string
                        image_url:
                          type: string
                        affiliate_link:
                          type: string
